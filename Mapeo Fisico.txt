CREATE SCHEMA REVISTAS_DIGITALES;

USE REVISTAS_DIGITALES;

CREATE TABLE usuario (
    nombre VARCHAR(100) NOT NULL,
    clave VARCHAR(100) NOT NULL,
    foto LONGBLOB,
    hobbies TEXT,
    intereses TEXT,
    descripcion TEXT,
    rol VARCHAR(15) NOT NULL,
    CONSTRAINT pk_usuario PRIMARY KEY (nombre)
);

CREATE TABLE anuncio (
    id INT AUTO_INCREMENT PRIMARY KEY,
    anunciante VARCHAR(100) NOT NULL,
    fecha DATE NOT NULL,
    tipo VARCHAR(10) NOT NULL,
    vigencia VARCHAR(10) NOT NULL,
    texto TEXT,
    imagen LONGBLOB,
    video LONGBLOB,
    estado VARCHAR(10) NOT NULL,
    precio DECIMAL(10, 2),
    CONSTRAINT fk_anunciante FOREIGN KEY (anunciante) REFERENCES usuario(nombre)
);


CREATE TABLE carteraDigital (
    usuario VARCHAR(100) NOT NULL,
    saldo DECIMAL(10, 2) NOT NULL DEFAULT 0.0,
    CONSTRAINT pk_usuario PRIMARY KEY (usuario),
    CONSTRAINT fk_usuario FOREIGN KEY (usuario) REFERENCES usuario(nombre) ON DELETE CASCADE
);

CREATE TABLE tipoAnuncio (
    nombre VARCHAR(50) PRIMARY KEY,
    precio DECIMAL(10, 2) DEFAULT 50.00
);

INSERT INTO tipoAnuncio (nombre)
VALUES
    ('Txt'),
    ('Txt-Img'),
    ('Video');
